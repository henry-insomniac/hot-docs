# 新功能开发工作流

## 适用场景
开发新功能（如增量索引、Blog 分页、插件热重载）

## 工作流程

### 1. 需求规划阶段
```bash
/prd 编写功能需求文档
```
- 明确功能目标与非目标
- 定义验收标准
- 识别技术风险

### 2. 架构设计阶段
```bash
/arch 设计功能架构方案
```
- 确定功能归属层
- 设计接口与数据流
- 评估架构影响

### 3. 创建分支
```bash
/branch 创建功能分支
```
- 遵循命名规范：`feature/<scope>/<description>`
- 推送到远程

### 4. 任务拆分
```bash
/todo 拆分功能为可执行任务
```
- 细化实现步骤
- 识别依赖关系
- 设定优先级

### 5. 功能实现
```bash
/implement 实现核心逻辑
```
- 遵循分层原则
- 保持类型安全
- 添加错误处理

### 6. 测试编写
```bash
/test 编写单元测试和集成测试
```
- 覆盖核心逻辑
- 测试边界情况
- 验证性能指标

### 7. 文档更新
```bash
/docs 更新 API 文档和使用指南
```
- API 文档
- 使用示例
- 注意事项

### 8. 代码提交
```bash
/commit 规范化提交代码
```
- Conventional Commits 格式
- 关联 Issue 编号

### 9. 创建 PR
```bash
/pr 创建 Pull Request
```
- 完整的 PR 描述
- 测试清单
- 性能影响说明

### 10. 自我审查
```bash
/review-pr --self
```
- 检查代码质量
- 验证架构合规性
- 确认测试覆盖

## 检查清单

- [ ] 需求文档完整（/prd）
- [ ] 架构设计合理（/arch）
- [ ] 分支命名规范（/branch）
- [ ] 任务拆分清晰（/todo）
- [ ] 代码实现完成（/implement）
- [ ] 测试覆盖充分（/test）
- [ ] 文档更新完整（/docs）
- [ ] 提交信息规范（/commit）
- [ ] PR 描述完整（/pr）
- [ ] 自我审查通过（/review-pr）

## 预期产出
- PRD 文档
- 架构设计文档
- 实现代码 + 测试
- API 文档
- Pull Request
